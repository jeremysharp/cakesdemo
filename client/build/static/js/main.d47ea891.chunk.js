(this.webpackJsonpcakes=this.webpackJsonpcakes||[]).push([[0],{194:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(9),s=a.n(i),r=(a(89),a(17)),l=a(16),o=a.n(l),u=a(23),d=a(10),j=a(11),m=a(13),b=a(12),v=(a(91),a(27)),k=a.n(v),h=a(31),f=a(84),O=a(2),x=function(e){var t=e.yumFactor,a=e.setYumFactor;return Object(O.jsxs)("div",{className:"slider-container",children:[Object(O.jsx)("div",{className:"field-label",children:"Yum Factor"}),Object(O.jsx)("div",{className:"slider",children:Object(O.jsx)(f.a,{className:"slider",min:1,max:5,marks:{1:1,2:2,3:3,4:4,5:5},value:t,onChange:function(e){a&&a(e)}})})]})},p=a(21),C=function(e){var t=e.viewCake,a=e.cake,n=e.children,c=a?a.imageUrl.includes(".")?"".concat(p.a,"/image/").concat(a.imageUrl):a.imageUrl:"";return a?Object(O.jsxs)(h.a,{className:"cake-card",children:[Object(O.jsx)(h.a.Img,{variant:"top",src:c,onClick:function(){a&&"number"===typeof a.id&&t(a.id)}}),Object(O.jsxs)(h.a.Body,{children:[Object(O.jsx)(h.a.Title,{children:a.name}),Object(O.jsx)(h.a.Text,{className:"comment",children:a.comment}),Object(O.jsx)(x,{yumFactor:a.yumFactor}),n]})]}):null},g=a(47),w=a(25),y=a(82),N=a.n(y),_=function(e){var t=e.cake,a=e.editCake,n=e.deleteCake,c=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("number"!==typeof t.id){e.next=5;break}return e.next=3,N.a.fire({icon:"question",title:"Delete cake",text:"Are you sure?",showCancelButton:!0,confirmButtonText:"Yes, delete it"});case 3:e.sent.isConfirmed&&n(t.id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsxs)(w.a,{variant:"outline-primary",size:"sm",onClick:function(){"number"===typeof t.id&&a(t.id)},children:[Object(O.jsx)("i",{className:"bi bi-pencil"}),Object(O.jsx)("span",{className:"icon-left",children:"Edit"})]}),"\xa0",Object(O.jsxs)(w.a,{variant:"outline-danger",size:"sm",onClick:c,children:[Object(O.jsx)("i",{className:"bi bi-trash"}),Object(O.jsx)("span",{className:"icon-left",children:"Delete"})]})]})},S=function(e){var t=e.cakesList,a=e.editCake,n=e.deleteCake,c=e.viewCake;return Object(O.jsx)(g.a,{className:"flexme",children:t.length?t.map((function(e){return Object(O.jsx)(C,{cake:e,viewCake:c,children:Object(O.jsx)(_,{cake:e,editCake:a,deleteCake:n})},e.id)})):Object(O.jsx)("div",{children:"No cakes yet \ud83d\ude1e Try adding a new one!"})})},F=(a(189),a(26)),L=a(37),E=a(8),T=a(55),I=a(35),V=a(34),A=function(e){var t=e.imageChange;return Object(O.jsx)(I.a.Group,{controlId:"formFile",className:"mb-3",children:Object(O.jsx)(I.a.Control,{type:"file",onChange:t,accept:".jpg,.jpeg,.gif,.png"})})},B=a(36),U=a.n(B),D=(a(192),function(e){var t=e.cake,a=void 0===t?null:t,c=e.setShow,i=e.insertCake,s=e.stopEdit,r=Object(n.useState)(""),l=Object(E.a)(r,2),d=l[0],j=l[1],m=Object(n.useState)(""),b=Object(E.a)(m,2),v=b[0],h=b[1],f=Object(n.useState)(0),y=Object(E.a)(f,2),N=y[0],_=y[1],S=Object(n.useState)(null),L=Object(E.a)(S,2),B=L[0],D=L[1],G=Object(n.useState)(""),P=Object(E.a)(G,2),R=P[0],q=P[1],z=Object(n.useState)("invalid"),J=Object(E.a)(z,2),Y=J[0],H=J[1],M=Object(n.useState)("invalid"),K=Object(E.a)(M,2),Q=K[0],W=K[1],Z=Object(n.useState)(!1),X=Object(E.a)(Z,2),$=X[0],ee=X[1],te=Object(n.useState)(null),ae=Object(E.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(n.useRef)(null);Object(n.useEffect)((function(){null!==ie.current&&ie.current.focus(),a&&"number"===typeof a.id&&(ce(a.id),j(a.name),h(a.comment),_(parseInt(a.yumFactor)),q(a.imageUrl),ee(!0))}),[a]);var se=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,c,r,l,u,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.image,n=t.cake,e.prev=1,e.next=4,k.a.post("".concat(p.a,"/cake"),n);case 4:if(c=e.sent,r=c.data,$){e.next=11;break}return(l=new FormData).append("image",a),e.next=11,k.a.post("".concat(p.a,"/image/").concat(r.id),l);case 11:return e.next=13,k.a.get("".concat(p.a,"/cake/").concat(r.id));case 13:u=e.sent,d=u.data,i(d),s(),F.b.success("Cake saved!"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),F.b.error("Save failed: "+e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:d,comment:v,yumFactor:N},!$&&B&&(t.image=B.name),ne&&(t.id=ne),e.next=5,se({cake:t,image:B});case 5:c(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le={name:{valid:function(){return d.length<=30&&d.length>0},desc:"Name is required, and must be 30 characters or less"},comment:{valid:function(){return v.length<=200&&v.length>0},desc:"Comment is required, and must be 200 characters or less"},yumFactor:{valid:function(){return[1,2,3,4,5].includes(parseInt(N))},desc:"Yum Factor is required, and must be a number between 1 and 5"},image:{valid:function(){return $||B&&B.size<2097152},desc:"image must have a valid image less than 2MB"}},oe=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":j(n),H(le.name.valid()?"valid":"invalid");break;case"comment":h(n),W(le.comment.valid()?"valid":"invalid");break;case"yumFactor":_(parseInt(n));break;default:return}},ue={name:d,comment:v,yumFactor:N,imageUrl:R};return Object(O.jsx)(g.a,{children:Object(O.jsxs)(I.a,{children:[Object(O.jsx)("div",{className:U.a.fieldLabel,children:"Name"}),Object(O.jsx)(T.a,{className:"mb-3",children:Object(O.jsx)(V.a,{ref:ie,name:"name",className:Y,placeholder:"Give your cake a name","aria-label":"cake name",value:d,onChange:oe})}),Object(O.jsx)("div",{className:U.a.fieldLabel,children:"Comment"}),Object(O.jsx)(T.a,{className:"mb-3",children:Object(O.jsx)(V.a,{name:"comment",as:"textarea",className:Q,placeholder:"Describe your cake","aria-label":"comment",value:v,onChange:oe})}),Object(O.jsx)(x,{yumFactor:N,setYumFactor:_}),Object(O.jsx)(A,{imageChange:function(e){ee(!1),q(URL.createObjectURL(e.target.files[0])),D(e.target.files[0])}}),Object(O.jsxs)(w.a,{onClick:function(){var e=0;Object.keys(le).forEach((function(t){le[t].valid()||(e++,F.b.error(le[t].desc))})),e||re()},variant:"outline-success",size:"sm",children:[Object(O.jsx)("i",{className:"bi bi-save"}),Object(O.jsx)("span",{className:"icon-left",children:"Save"})]}),"\xa0",Object(O.jsxs)(w.a,{onClick:function(){j(""),h(""),_(0),D(null),c(!1),s()},variant:"outline-danger",size:"sm",children:[Object(O.jsx)("i",{className:"bi bi-x-circle"}),Object(O.jsx)("span",{className:"icon-left",children:"Cancel"})]}),Object(O.jsx)("div",{className:U.a.fieldLabel,children:"Preview"}),Object(O.jsx)("div",{className:U.a.preview,children:Object(O.jsx)(C,{cake:ue})})]})})}),G=function(e){var t=e.show,a=e.setShow,n=e.insertCake,c=e.stopEdit,i=e.cake,s=void 0===i?null:i;return Object(O.jsxs)(L.a,{show:t,onHide:function(){a(!1)},children:[Object(O.jsx)(L.a.Header,{closeButton:!0,children:Object(O.jsxs)(L.a.Title,{children:[s?"Edit":"Add"," Cake"]})}),Object(O.jsx)(L.a.Body,{children:Object(O.jsx)(D,{setShow:a,insertCake:n,cake:s,stopEdit:c})})]})},P=a(54),R=a.n(P),q=function(e){var t=e.setShow;return Object(O.jsxs)("div",{className:R.a.controls,children:[Object(O.jsx)("a",{className:R.a.link,href:"/api-docs",target:"_blank",children:"API Documentation"}),Object(O.jsxs)(w.a,{size:"sm",onClick:t,children:[Object(O.jsx)("i",{className:"bi bi-plus-lg"}),Object(O.jsx)("span",{className:"icon-left",children:"Add cake"})]})]})},z=a(22),J=a.n(z),Y=function(e){var t=e.viewCake,a=e.cake,n="".concat(p.a,"/image/").concat(a.imageUrl);return Object(O.jsx)("div",{className:J.a.container,onClick:function(){t(0)},children:Object(O.jsxs)("div",{className:J.a.main,children:[Object(O.jsx)("img",{className:J.a.image,src:n,alt:""}),Object(O.jsxs)("div",{className:J.a.overlay,children:[Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:J.a.info,children:[Object(O.jsxs)("div",{className:J.a.yum,children:[Object(O.jsx)("div",{className:J.a.yumFactor,children:a.yumFactor}),Object(O.jsx)("div",{className:J.a.yumTitle,children:"YUMFACTOR"})]}),Object(O.jsx)("div",{className:J.a.comment,children:Object(O.jsx)("span",{children:a.comment})})]})}),Object(O.jsx)("div",{className:J.a.name,children:a.name})]})]})})},H=function(){return Object(O.jsxs)("div",{className:"App-header",children:["CAKES"," ",Object(O.jsxs)("div",{className:"sub",children:["A Node.js &",Object(O.jsx)("br",{}),"React demo :",Object(O.jsx)("br",{}),"Jeremy Sharp"]})]})},M=a(83),K=a.n(M),Q=function(){return Object(O.jsx)("div",{className:K.a.main,children:"\xa9 Jeremy Sharp 2021 | Privacy Policy etc"})},W=function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={cakesList:[],show:!1,editingCake:null,viewingCake:null},e.getCakes=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("".concat(p.a,"/"));case 3:a=t.sent,e.setState({cakesList:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),F.b.error("Getting cakes failed: "+t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.editCake=function(t){e.setState({editingCake:e.state.cakesList.find((function(e){return(null===e||void 0===e?void 0:e.id)===t}))}),e.setState({show:!0})},e.stopEdit=function(){e.setState({editingCake:null})},e.viewCake=function(t){var a=e.state.viewingCake?null:e.state.cakesList.find((function(e){return(null===e||void 0===e?void 0:e.id)===t}));e.setState({viewingCake:a})},e.insertCake=function(t){var a=e.state.cakesList.findIndex((function(e){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)}));if(a>-1){var n=Object(r.a)(e.state.cakesList);n[a]=Object.assign({},n[a],t),e.setState({cakesList:n})}else e.setState({cakesList:[t].concat(Object(r.a)(e.state.cakesList))})},e.setShow=function(t){e.setState({show:!!t}),t||e.setState({editingCake:null})},e.deleteCake=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.delete("".concat(p.a,"/cake/").concat(a));case 3:(n=e.state.cakesList.findIndex((function(e){return(null===e||void 0===e?void 0:e.id)===a})))>-1&&((c=Object(r.a)(e.state.cakesList)).splice(n,1),e.setState({cakesList:c})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),F.b.error("Error deleting cake: "+t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.componentDidMount=function(){e.getCakes()},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state,t=e.cakesList,a=e.show,n=e.editingCake,c=e.viewingCake;return Object(O.jsxs)("div",{className:"App",children:[c?Object(O.jsx)(Y,{cake:c,viewCake:this.viewCake}):null,Object(O.jsx)(H,{}),Object(O.jsxs)("div",{className:"main",children:[Object(O.jsx)(q,{setShow:this.setShow}),Object(O.jsx)(G,{show:a,setShow:this.setShow,insertCake:this.insertCake,cake:n,stopEdit:this.stopEdit}),Object(O.jsx)(S,{cakesList:t,editCake:this.editCake,deleteCake:this.deleteCake,viewCake:this.viewCake})]}),Object(O.jsx)(Q,{}),Object(O.jsx)(F.a,{})]})}}]),a}(c.a.Component),Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,196)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),i(e),s(e)}))};a(193);s.a.render(Object(O.jsx)(W,{}),document.getElementById("root")),Z()},21:function(e){e.exports=JSON.parse('{"a":"/api"}')},22:function(e,t,a){e.exports={container:"ViewCake_container__2kZu7",main:"ViewCake_main__2JdQP",image:"ViewCake_image__2mwGG",overlay:"ViewCake_overlay__2Tj17",info:"ViewCake_info__1jIq4",yum:"ViewCake_yum__1wnds",name:"ViewCake_name__1_gxr",comment:"ViewCake_comment__1IVvG",yumFactor:"ViewCake_yumFactor__2BCKS",yumTitle:"ViewCake_yumTitle__1WHyl"}},36:function(e,t,a){e.exports={fieldLabel:"CakeForm_fieldLabel__2G24i",preview:"CakeForm_preview__2swO9"}},54:function(e,t,a){e.exports={controls:"Controls_controls__3uORl",link:"Controls_link__wHLTn"}},83:function(e,t,a){e.exports={main:"Footer_main__mRqL0"}},89:function(e,t,a){},91:function(e,t,a){}},[[194,1,2]]]);
//# sourceMappingURL=main.d47ea891.chunk.js.map